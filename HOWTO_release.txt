How to deploy JFlex and the JFlex Maven Plugin to the Sonatype OSS Maven repository
-----------------------------------------------------------------------------------

This document describes how the release manager of the JFlex team can release 
JFlex and the JFlex Maven Plugin on the Maven Central repository.  The Central
repository is synchronized with the repository at http://oss.sonatype.org.
  
For more information, see 
https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide

In your ~/.m2/settings.xml, create <server>-s for snapshots and releases on the
Sonatype OSS Maven repository.  Fill in the username and password for your Sonatype
JIRA account, which is also the account for the Sonatype Nexus instance that serves
the OSS Maven repository: 

-----
<?xml version="1.0" encoding="UTF-8"?>
<settings xmlns="http://maven.apache.org/POM/4.0.0">
  <!-- ... -->
  <servers>
    <!-- ... -->
    <server>
      <id>sonatype-nexus-snapshots</id>
      <username> ... </username>
      <password> ... </password>
    </server>
    <server>
      <id>sonatype-nexus-staging</id>
      <username> ... </username>
      <password> ... </password>
    </server>
    <!-- ... -->
  </servers>
  <!-- ... -->
</settings>
-----


Releasing JFlex and the JFlex Maven Plugin
------------------------------------------

# Get the source - put your username in place of the ...'s
svn co --username=... https://svn.code.sf.net/p/jflex/code/trunk  jflex/trunk 

# Make sure all changes are committed
cd jflex/trunk
svn stat

# Stage the release to the Sonatype OSS Maven repository

## Prepare the release - this will remove -SNAPSHOT from all POM versions,
## commit them, then commit a release tag.
## Fill in your *SourceForge* username and password in place of the ...'s
mvn release:prepare -Dusername=... -Dpassword=...

## Perform (i.e. stage) the release
# TODO: fill this in

# TODO: fix instructions to build and deploy the JFlex Maven Plugin site to SourceForge
# TODO: Maybe this can be automatically done as part of the above?

# create a shell on sourceforge
ssh -t decamps,jflex@shell.sf.net create

# Build the site for the JFlex Maven Plugin
cd jflex-maven-plugin && mvn -Prelease site

